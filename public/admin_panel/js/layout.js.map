{"version":3,"sources":["layout_new.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"layout.js","sourcesContent":["/**\nCore script to handle the entire theme and core functions\n**/\nvar Layout = function() {\n\n    var layoutImgPath = 'layouts/layout4/img/';\n\n    var layoutCssPath = 'layouts/layout4/css/';\n\n    var resBreakpointMd = App.getResponsiveBreakpoint('md');\n\n    var ajaxContentSuccessCallbacks = [];\n    var ajaxContentErrorCallbacks = [];\n\n    //* BEGIN:CORE HANDLERS *//\n    // this function handles responsive layout on screen size resize or mobile device rotate.\n\n    // Set proper height for sidebar and content. The content and sidebar height must be synced always.\n    var handleSidebarAndContentHeight = function () {\n        var content = $('.page-content');\n        var sidebar = $('.page-sidebar');\n        var body = $('body');\n        var height;\n\n        if (body.hasClass(\"page-footer-fixed\") === true && body.hasClass(\"page-sidebar-fixed\") === false) {\n            var available_height = App.getViewPort().height - $('.page-footer').outerHeight(true) - $('.page-header').outerHeight(true);\n            if (content.height() < available_height) {\n                content.attr('style', 'min-height:' + available_height + 'px');\n            }\n        } else {\n            if (body.hasClass('page-sidebar-fixed')) {\n                height = _calculateFixedSidebarViewportHeight()  - 10;\n                if (body.hasClass('page-footer-fixed') === false) {\n                    height = height - $('.page-footer').outerHeight(true);\n                }\n            } else {\n                var headerHeight = $('.page-header').outerHeight(true);\n                var footerHeight = $('.page-footer').outerHeight(true);\n\n                if (App.getViewPort().width < resBreakpointMd) {\n                    height = App.getViewPort().height - headerHeight - footerHeight;\n                } else {\n                    height = sidebar.height() - 10;\n                }\n\n                if ((height + headerHeight + footerHeight) <= App.getViewPort().height) {\n                    height = App.getViewPort().height - headerHeight - footerHeight - 45;\n                }\n            }\n            content.attr('style', 'min-height:' + height + 'px');\n        }\n    };\n\n    // Handle sidebar menu links\n    var handleSidebarMenuActiveLink = function(mode, el) {\n        var url = location.hash.toLowerCase();\n\n        var menu = $('.page-sidebar-menu');\n\n        if (mode === 'click' || mode === 'set') {\n            el = $(el);\n        } else if (mode === 'match') {\n            menu.find(\"li > a\").each(function() {\n                var path = $(this).attr(\"href\").toLowerCase();\n                // url match condition\n                if (path.length > 1 && url.substr(1, path.length - 1) == path.substr(1)) {\n                    el = $(this);\n                    return;\n                }\n            });\n        }\n\n        if (!el || el.size() == 0) {\n            return;\n        }\n\n        if (el.attr('href').toLowerCase() === 'javascript:;' || el.attr('href').toLowerCase() === '#') {\n            return;\n        }\n\n        var slideSpeed = parseInt(menu.data(\"slide-speed\"));\n        var keepExpand = menu.data(\"keep-expanded\");\n\n        // begin: handle active state\n        if (menu.hasClass('page-sidebar-menu-hover-submenu') === false) {\n            menu.find('li.nav-item.open').each(function() {\n                var match = false;\n                $(this).find('li').each(function(){\n                    if ($(this).find(' > a').attr('href') === el.attr('href')) {\n                        match = true;\n                        return;\n                    }\n                });\n\n                if (match === true) {\n                    return;\n                }\n\n                $(this).removeClass('open');\n                $(this).find('> a > .arrow.open').removeClass('open');\n                $(this).find('> .sub-menu').slideUp();\n            });\n        } else {\n             menu.find('li.open').removeClass('open');\n        }\n\n        menu.find('li.active').removeClass('active');\n        menu.find('li > a > .selected').remove();\n        // end: handle active state\n\n        el.parents('li').each(function () {\n            $(this).addClass('active');\n            $(this).find('> a > span.arrow').addClass('open');\n\n            if ($(this).parent('ul.page-sidebar-menu').size() === 1) {\n                $(this).find('> a').append('<span class=\"selected\"></span>');\n            }\n\n            if ($(this).children('ul.sub-menu').size() === 1) {\n                $(this).addClass('open');\n            }\n        });\n\n        if (mode === 'click') {\n            if (App.getViewPort().width < resBreakpointMd && $('.page-sidebar').hasClass(\"in\")) { // close the menu on mobile view while laoding a page\n                $('.page-header .responsive-toggler').click();\n            }\n        }\n    };\n\n    // Handle sidebar menu\n    var handleSidebarMenu = function() {\n        $('.page-sidebar').on('click', 'li > a', function(e) {\n\n            if (App.getViewPort().width >= resBreakpointMd && $(this).parents('.page-sidebar-menu-hover-submenu').size() === 1) { // exit of hover sidebar menu\n                return;\n            }\n\n            if ($(this).next().hasClass('sub-menu') === false) {\n                if (App.getViewPort().width < resBreakpointMd && $('.page-sidebar').hasClass(\"in\")) { // close the menu on mobile view while laoding a page\n                    $('.page-header .responsive-toggler').click();\n                }\n                return;\n            }\n\n            var parent = $(this).parent().parent();\n            var the = $(this);\n            var menu = $('.page-sidebar-menu');\n            var sub = $(this).next();\n\n            var autoScroll = menu.data(\"auto-scroll\");\n            var slideSpeed = parseInt(menu.data(\"slide-speed\"));\n            var keepExpand = menu.data(\"keep-expanded\");\n\n            if (keepExpand !== true) {\n                parent.children('li.open').children('a').children('.arrow').removeClass('open');\n                parent.children('li.open').children('.sub-menu:not(.always-open)').slideUp(slideSpeed);\n                parent.children('li.open').removeClass('open');\n            }\n\n            var slideOffeset = -200;\n\n            if (sub.is(\":visible\")) {\n                $('.arrow', $(this)).removeClass(\"open\");\n                $(this).parent().removeClass(\"open\");\n                sub.slideUp(slideSpeed, function() {\n                    if (autoScroll === true && $('body').hasClass('page-sidebar-closed') === false) {\n                        if ($('body').hasClass('page-sidebar-fixed')) {\n                            menu.slimScroll({\n                                'scrollTo': (the.position()).top\n                            });\n                        } else {\n                            App.scrollTo(the, slideOffeset);\n                        }\n                    }\n                    handleSidebarAndContentHeight();\n                });\n            } else {\n                $('.arrow', $(this)).addClass(\"open\");\n                $(this).parent().addClass(\"open\");\n                sub.slideDown(slideSpeed, function() {\n                    if (autoScroll === true && $('body').hasClass('page-sidebar-closed') === false) {\n                        if ($('body').hasClass('page-sidebar-fixed')) {\n                            menu.slimScroll({\n                                'scrollTo': (the.position()).top\n                            });\n                        } else {\n                            App.scrollTo(the, slideOffeset);\n                        }\n                    }\n                    handleSidebarAndContentHeight();\n                });\n            }\n\n            e.preventDefault();\n        });\n\n        // handle menu close for angularjs version\n        if (App.isAngularJsApp()) {\n            $(\".page-sidebar-menu li > a\").on(\"click\", function(e) {\n                if (App.getViewPort().width < resBreakpointMd && $(this).next().hasClass('sub-menu') === false) {\n                    $('.page-header .responsive-toggler').click();\n                }\n            });\n        }\n\n        // handle ajax links within sidebar menu\n        $('.page-sidebar').on('click', ' li > a.ajaxify', function(e) {\n            e.preventDefault();\n            App.scrollTop();\n\n            var url = $(this).attr(\"href\");\n            var menuContainer = $('.page-sidebar ul');\n\n            menuContainer.children('li.active').removeClass('active');\n            menuContainer.children('arrow.open').removeClass('open');\n\n            $(this).parents('li').each(function() {\n                $(this).addClass('active');\n                $(this).children('a > span.arrow').addClass('open');\n            });\n            $(this).parents('li').addClass('active');\n\n            if (App.getViewPort().width < resBreakpointMd && $('.page-sidebar').hasClass(\"in\")) { // close the menu on mobile view while laoding a page\n                $('.page-header .responsive-toggler').click();\n            }\n\n            Layout.loadAjaxContent(url, $(this));\n        });\n\n        // handle ajax link within main content\n        $('.page-content').on('click', '.ajaxify', function(e) {\n            e.preventDefault();\n            App.scrollTop();\n\n            var url = $(this).attr(\"href\");\n\n\n            App.startPageLoading();\n\n            if (App.getViewPort().width < resBreakpointMd && $('.page-sidebar').hasClass(\"in\")) { // close the menu on mobile view while laoding a page\n                $('.page-header .responsive-toggler').click();\n            }\n\n            Layout.loadAjaxContent(url);\n        });\n\n        // handle scrolling to top on responsive menu toggler click when header is fixed for mobile view\n        $(document).on('click', '.page-header-fixed-mobile .responsive-toggler', function(){\n            App.scrollTop();\n        });\n    };\n\n    // Helper function to calculate sidebar height for fixed sidebar layout.\n    var _calculateFixedSidebarViewportHeight = function() {\n        var sidebarHeight = App.getViewPort().height - $('.page-header').outerHeight(true) - 40;\n        if ($('body').hasClass(\"page-footer-fixed\")) {\n            sidebarHeight = sidebarHeight - $('.page-footer').outerHeight();\n        }\n\n        return sidebarHeight;\n    };\n\n    // Handles fixed sidebar\n    var handleFixedSidebar = function() {\n        var menu = $('.page-sidebar-menu');\n\n        App.destroySlimScroll(menu);\n\n        if ($('.page-sidebar-fixed').size() === 0) {\n            handleSidebarAndContentHeight();\n            return;\n        }\n\n        if (App.getViewPort().width >= resBreakpointMd) {\n            //menu.attr(\"data-height\", _calculateFixedSidebarViewportHeight());\n            App.initSlimScroll(menu);\n            handleSidebarAndContentHeight();\n        }\n    };\n\n    // Handles sidebar toggler to close/hide the sidebar.\n    var handleFixedSidebarHoverEffect = function () {\n        var body = $('body');\n        if (body.hasClass('page-sidebar-fixed')) {\n            $('.page-sidebar').on('mouseenter', function () {\n                if (body.hasClass('page-sidebar-closed')) {\n                    $(this).find('.page-sidebar-menu').removeClass('page-sidebar-menu-closed');\n                }\n            }).on('mouseleave', function () {\n                if (body.hasClass('page-sidebar-closed')) {\n                    $(this).find('.page-sidebar-menu').addClass('page-sidebar-menu-closed');\n                }\n            });\n        }\n    };\n\n    // Hanles sidebar toggler\n    var handleSidebarToggler = function() {\n        var body = $('body');\n        if ($.cookie && $.cookie('sidebar_closed') === '1' && App.getViewPort().width >= resBreakpointMd) {\n            $('body').addClass('page-sidebar-closed');\n            $('.page-sidebar-menu').addClass('page-sidebar-menu-closed');\n        }\n\n        // handle sidebar show/hide\n        $('body').on('click', '.sidebar-toggler', function(e) {\n            var sidebar = $('.page-sidebar');\n            var sidebarMenu = $('.page-sidebar-menu');\n            $(\".sidebar-search\", sidebar).removeClass(\"open\");\n\n            if (body.hasClass(\"page-sidebar-closed\")) {\n                body.removeClass(\"page-sidebar-closed\");\n                sidebarMenu.removeClass(\"page-sidebar-menu-closed\");\n                if ($.cookie) {\n                    $.cookie('sidebar_closed', '0');\n                }\n            } else {\n                body.addClass(\"page-sidebar-closed\");\n                sidebarMenu.addClass(\"page-sidebar-menu-closed\");\n                if (body.hasClass(\"page-sidebar-fixed\")) {\n                    sidebarMenu.trigger(\"mouseleave\");\n                }\n                if ($.cookie) {\n                    $.cookie('sidebar_closed', '1');\n                }\n            }\n\n            $(window).trigger('resize');\n        });\n\n        handleFixedSidebarHoverEffect();\n\n        // handle the search bar close\n        $('.page-sidebar').on('click', '.sidebar-search .remove', function(e) {\n            e.preventDefault();\n            $('.sidebar-search').removeClass(\"open\");\n        });\n\n        // handle the search query submit on enter press\n        $('.page-sidebar .sidebar-search').on('keypress', 'input.form-control', function(e) {\n            if (e.which == 13) {\n                $('.sidebar-search').submit();\n                return false; //<---- Add this line\n            }\n        });\n\n        // handle the search submit(for sidebar search and responsive mode of the header search)\n        $('.sidebar-search .submit').on('click', function(e) {\n            e.preventDefault();\n            if ($('body').hasClass(\"page-sidebar-closed\")) {\n                if ($('.sidebar-search').hasClass('open') === false) {\n                    if ($('.page-sidebar-fixed').size() === 1) {\n                        $('.page-sidebar .sidebar-toggler').click(); //trigger sidebar toggle button\n                    }\n                    $('.sidebar-search').addClass(\"open\");\n                } else {\n                    $('.sidebar-search').submit();\n                }\n            } else {\n                $('.sidebar-search').submit();\n            }\n        });\n\n        // handle close on body click\n        if ($('.sidebar-search').size() !== 0) {\n            $('.sidebar-search .input-group').on('click', function(e) {\n                e.stopPropagation();\n            });\n\n            $('body').on('click', function() {\n                if ($('.sidebar-search').hasClass('open')) {\n                    $('.sidebar-search').removeClass(\"open\");\n                }\n            });\n        }\n    };\n\n    // Handles the horizontal menu\n    var handleHeader = function() {\n        // handle search box expand/collapse\n        $('.page-header').on('click', '.search-form', function(e) {\n            $(this).addClass(\"open\");\n            $(this).find('.form-control').focus();\n\n            $('.page-header .search-form .form-control').on('blur', function(e) {\n                $(this).closest('.search-form').removeClass(\"open\");\n                $(this).unbind(\"blur\");\n            });\n        });\n\n        // handle hor menu search form on enter press\n        $('.page-header').on('keypress', '.hor-menu .search-form .form-control', function(e) {\n            if (e.which == 13) {\n                $(this).closest('.search-form').submit();\n                return false;\n            }\n        });\n\n        // handle header search button click\n        $('.page-header').on('mousedown', '.search-form.open .submit', function(e) {\n            e.preventDefault();\n            e.stopPropagation();\n            $(this).closest('.search-form').submit();\n        });\n    };\n\n    // Handles the go to top button at the footer\n    var handleGoTop = function() {\n        var offset = 300;\n        var duration = 500;\n\n        if (navigator.userAgent.match(/iPhone|iPad|iPod/i)) { // ios supported\n            $(window).bind(\"touchend touchcancel touchleave\", function(e) {\n                if ($(this).scrollTop() > offset) {\n                    $('.scroll-to-top').fadeIn(duration);\n                } else {\n                    $('.scroll-to-top').fadeOut(duration);\n                }\n            });\n        } else { // general\n            $(window).scroll(function() {\n                if ($(this).scrollTop() > offset) {\n                    $('.scroll-to-top').fadeIn(duration);\n                } else {\n                    $('.scroll-to-top').fadeOut(duration);\n                }\n            });\n        }\n\n        $('.scroll-to-top').click(function(e) {\n            e.preventDefault();\n            $('html, body').animate({\n                scrollTop: 0\n            }, duration);\n            return false;\n        });\n    };\n    //* END:CORE HANDLERS *//\n\n    return {\n\n        // Main init methods to initialize the layout\n        // IMPORTANT!!!: Do not modify the core handlers call order.\n\n        initHeader: function() {\n            handleHeader(); // handles horizontal menu\n        },\n\n        setSidebarMenuActiveLink: function(mode, el) {\n            handleSidebarMenuActiveLink(mode, el);\n        },\n\n        initSidebar: function() {\n            //layout handlers\n            handleFixedSidebar(); // handles fixed sidebar menu\n            handleSidebarMenu(); // handles main menu\n            handleSidebarToggler(); // handles sidebar hide/show\n\n            if (App.isAngularJsApp()) {\n                handleSidebarMenuActiveLink('match'); // init sidebar active links\n            }\n\n            App.addResizeHandler(handleFixedSidebar); // reinitialize fixed sidebar on window resize\n        },\n\n        initContent: function() {\n            return;\n        },\n\n        initFooter: function() {\n            handleGoTop(); //handles scroll to top functionality in the footer\n        },\n\n        init: function () {\n            this.initHeader();\n            this.initSidebar();\n            this.initContent();\n            this.initFooter();\n        },\n\n        loadAjaxContent: function(url, sidebarMenuLink) {\n            var pageContent = $('.page-content .page-content-body');\n\n            App.startPageLoading({animate: true});\n\n            $.ajax({\n                type: \"GET\",\n                cache: false,\n                url: url,\n                dataType: \"html\",\n                success: function (res) {\n                    App.stopPageLoading();\n\n                    for (var i = 0; i < ajaxContentSuccessCallbacks.length; i++) {\n                        ajaxContentSuccessCallbacks[i].call(res);\n                    }\n\n                    if (sidebarMenuLink.size() > 0 && sidebarMenuLink.parents('li.open').size() === 0) {\n                        $('.page-sidebar-menu > li.open > a').click();\n                    }\n\n                    pageContent.html(res);\n                    Layout.fixContentHeight(); // fix content height\n                    App.initAjax(); // initialize core stuff\n                },\n                error: function (res, ajaxOptions, thrownError) {\n                    App.stopPageLoading();\n                    pageContent.html('<h4>Could not load the requested content.</h4>');\n\n                    for (var i = 0; i < ajaxContentErrorCallbacks.length; i++) {\n                        ajaxContentSuccessCallbacks[i].call(res);\n                    }\n                }\n            });\n        },\n\n        addAjaxContentSuccessCallback: function(callback) {\n            ajaxContentSuccessCallbacks.push(callback);\n        },\n\n        addAjaxContentErrorCallback: function(callback) {\n            ajaxContentErrorCallbacks.push(callback);\n        },\n\n        //public function to fix the sidebar and content height accordingly\n        fixContentHeight: function() {\n            return;\n        },\n\n        initFixedSidebarHoverEffect: function() {\n            handleFixedSidebarHoverEffect();\n        },\n\n        initFixedSidebar: function() {\n            handleFixedSidebar();\n        },\n\n        getLayoutImgPath: function() {\n            return App.getAssetsPath() + layoutImgPath;\n        },\n\n        getLayoutCssPath: function() {\n            return App.getAssetsPath() + layoutCssPath;\n        }\n    };\n\n}();\n\nif (App.isAngularJsApp() === false) {\n    jQuery(document).ready(function() {\n       Layout.init(); // init metronic core componets\n    });\n}\n"],"sourceRoot":"/source/"}